(()=>{"use strict";var t={245:(t,e,n)=>{function o(t){this.message=t}n.r(e),n.d(e,{InvalidTokenError:()=>a,default:()=>l}),o.prototype=new Error,o.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,r=0,a=0,l="";i=e.charAt(a++);~i&&(n=r%4?64*n+i:i,r++%4)?l+=String.fromCharCode(255&n>>(-2*r&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return l};function r(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(i(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return i(e)}}function a(t){this.message=t}a.prototype=new Error,a.prototype.name="InvalidTokenError";const l=function(t,e){if("string"!=typeof t)throw new a("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(r(t.split(".")[n]))}catch(t){throw new a("Invalid token specified: "+t.message)}}},363:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function l(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,i){var r=this;this.getDetails=function(){return n(r,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},this.canClaimBenefit=function(){return!1},this.claim=function(){},this.open=function(){r.ui.openWallet("/benefit-details/".concat(r.id))},this.session=e,this.ui=i,this.id=t}},771:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n){var o=this;this.getMyNFTs=function(){return[]},this.listNFTs=function(t){return[]},this.open=function(t,e){var n='/collection-details?filters={"collectionIds":["'.concat(o.id,'"]}');"NFT_LIST"===(null==e?void 0:e.uiState)&&(n='marketplace/listings?filters={"collectionIds":["'.concat(o.id,'"]}')),o.ui.openWallet(n)},this.session=e,this.ui=n,this.id=t}},138:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function l(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=a(n(363)),s=a(n(98)),c=a(n(119)),u=a(n(771)),d=a(n(281)),f=function(t){var e=this;this.client_id="default",this.eventHandlersMap=new Map,this.handleEvent=function(t){console.log("Handle Event",t);var n=e.eventHandlersMap.get(t.event)||[];console.log("registeredhandlers",n),n.forEach((function(e){e.handler(t.payload)})),e.eventHandlersMap.set(t.event,n.filter((function(t){var e;return!(null===(e=t.options)||void 0===e?void 0:e.once)})))},this.openWallet=function(t){e.ui.openWallet(t)},this.close=function(){e.ui.close()},this.login=function(t){return o(e,void 0,void 0,(function(){var e,n,o=this;return i(this,(function(i){return((null==t?void 0:t.forced)||!this.session.isLoggedIn)&&(this.openWallet("/login"),e=function(t){o.close()},n=function(){o.off("LOGIN",e)},this.on("LOGIN",e,{once:!0}),this.on("BEFORE_CLOSE",n,{once:!0})),[2]}))}))},this.logout=function(t){return o(e,void 0,void 0,(function(){return i(this,(function(e){return(null==t?void 0:t.clearUserSessionOnly)?(this.session.onLogout(),[2]):(this.openWallet("/logout"),[2])}))}))},this.benefit=function(t){return new l.default(t,e.session,e.ui)},this.nft=function(t){return new c.default(t,e.session,e.ui)},this.listCollections=function(t){return[]},this.collection=function(t){return new u.default(t,e.session,e.ui)},this.openMyNfts=function(){e.openWallet("/nfts-list/own")},this.whitelist=function(t){e.openWallet("/login?whitelist=true")},this.on=function(t,n,o){var i=e.eventHandlersMap.get(t)||[];e.eventHandlersMap.set(t,r(r([],i,!0),[{handler:n,options:o}],!1))},this.off=function(t,n){var o=e.eventHandlersMap.get(t)||[];e.eventHandlersMap.set(t,o.filter((function(t){return t.handler!==n})))},this.client_id=(null==t?void 0:t.client_id)||"default",this.session=new s.default,this.ui=new d.default((function(){e.handleEvent({event:"BEFORE_CLOSE",payload:{}})}),(function(){e.handleEvent({event:"OPEN",payload:{}})}),t),"undefined"!=typeof window&&(this.on("LOGIN",(function(t){console.log("Session lOgin Start",e.session,e.session.onLogin),e.session.onLogin(t.payload.bearerToken)})),this.on("LOGOUT",(function(){return e.session.onLogout()})),window.addEventListener("message",(function(t){try{if(t.origin!==e.ui.baseUrl)return;console.log("Message",t);var n=JSON.parse(t.data);e.handleEvent(n)}catch(t){}})))};if("undefined"!=typeof window){var h=function(){window.Wallet=f};"complete"===document.readyState?h():window.attachEvent?window.attachEvent("onload",h):window.addEventListener("load",h,!1)}e.default=f},119:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n){var o=this;this.getDetails=function(){},this.open=function(t){o.ui.openWallet("/nft-details/".concat(o.id))},this.session=e,this.ui=n,this.id=t}},98:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(245)),r=function(){function t(){var t=this;this.bearerTokenKey="BearerToken",this.onLogin=function(e){console.log("Setting localstore",t.bearerTokenKey,e),localStorage.setItem(t.bearerTokenKey,e)},this.onLogout=function(){localStorage.removeItem(t.bearerTokenKey)}}return Object.defineProperty(t.prototype,"isLoggedIn",{get:function(){var t=localStorage.getItem(this.bearerTokenKey);if(!t)return!1;var e=(0,i.default)(t),n=Date.now()/1e3;return(e&&(null==e?void 0:e.exp))>n},enumerable:!1,configurable:!0}),t}();e.default=r},281:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,o){var i=this;this.baseUrl="http://localhost:3005",this.portalId="",this.iframeId="",this.generateRandomnString=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*o));return e},this.generatePortalId=function(){return"skywallet-".concat(i.generateRandomnString(10))},this.injectPortal=function(){if(!document.getElementById(i.portalId)){var t=document.createElement("style");t.innerHTML="\n            #".concat(i.portalId," .close-container {\n                min-width: 315px;\n                max-width: 428px;\n                width: 100%;\n                position: fixed;\n                left: 50%;\n                right: 50%;\n                transform: translateX(-50%);\n                -webkit-box-align: center;\n                align-items: center;\n                -webkit-box-pack: end;\n                justify-content: flex-end;\n                background-color: rgb(204, 213, 236);\n                z-index: 100;\n                height: 40px;\n                font-size: 14px;\n                font-weight: 700;\n                color: rgb(46, 54, 72);\n                cursor: pointer;\n                display: flex !important;\n            }\n            #").concat(i.portalId," .close-icon {\n                width: 20px;\n                height: 20px;\n                padding: 0px;\n                margin: 10px;\n                pointer-events: all;\n                color: black;\n                font-size: 12px;\n                font-weight: 600;\n                z-index: 9;\n                background-color: rgb(253, 215, 63);\n                border: 0px;\n                cursor: pointer;\n                border-radius: 100% !important;\n            }\n            #").concat(i.portalId," .iframe {\n                height: 926px;\n                max-width: 428px;\n                min-width: 375px;\n                width: 100%;\n                position: fixed;\n                left: 50%;\n                right: 50%;\n                -webkit-transform: translateX(-50%);\n                -moz-transform: translateX(-50%);\n                -ms-transform: translateX(-50%);\n                transform: translateX(-50%);\n                z-index: 99;\n                background-color: #e6eaf0;\n                padding-top: 2.5rem;\n                max-height: 90vh;        \n            }\n            @media (max-width: 429px) {\n                #").concat(i.portalId," .iframe {\n                    height: 100%;\n                    max-height: 100vh;  \n                }\n            }\n            #").concat(i.portalId," .overlay {\n                position: fixed;\n                display: block;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 90;\n                cursor: pointer;\n                -webkit-backdrop-filter: blur(20px);\n                backdrop-filter: blur(20px);\n            }\n            #").concat(i.portalId," {\n                display: none;\n                position: fixed;\n                left: 0;\n                right: 0;\n                top: 0;\n                bottom: 0;\n                z-index: 88;        \n            }\n        "),document.head.appendChild(t);var e=document.createElement("div");e.setAttribute("id",i.portalId);var n=document.createElement("iframe");n.setAttribute("src",""),n.setAttribute("frameborder","0"),n.setAttribute("allowFullScreen","true"),n.setAttribute("allow",Object.keys(i.walletPermissions).filter((function(t){return i.walletPermissions[t]})).join(";")),n.setAttribute("class","iframe"),n.setAttribute("id",i.iframeId);var o=document.createElement("div");o.setAttribute("class","overlay");var r=document.createElement("div");r.setAttribute("class","close-container"),r.onclick=i.close;var a=document.createElement("span");a.innerHTML="Close";var l=document.createElement("button");l.innerHTML="X",l.setAttribute("class","close-icon"),r.appendChild(a),r.appendChild(l),e.appendChild(r),e.appendChild(n),e.appendChild(o),document.body.appendChild(e)}},this.openWallet=function(t){var e,n;null===(e=document.getElementById(i.iframeId))||void 0===e||e.setAttribute("src","".concat(i.baseUrl,"/").concat(t||"")),null===(n=document.getElementById(i.portalId))||void 0===n||n.setAttribute("style","display: block;"),i.onOpen()},this.close=function(){var t,e;null===(t=document.getElementById(i.iframeId))||void 0===t||t.setAttribute("src",""),null===(e=document.getElementById(i.portalId))||void 0===e||e.setAttribute("style",""),i.onClose()},this.onClose=t,this.onOpen=e,this.walletPermissions=n({camera:!0,"clipboard-read":!0,"clipboard-write":!0,microphone:!0},(null==o?void 0:o.permission)||{}),this.portalId=this.generatePortalId(),this.iframeId="".concat(this.portalId,"-iframe"),"undefined"!=typeof window&&this.injectPortal()}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(138)})();