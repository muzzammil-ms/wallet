(()=>{"use strict";var t={245:(t,e,n)=>{function r(t){this.message=t}n.r(e),n.d(e,{InvalidTokenError:()=>a,default:()=>l}),r.prototype=new Error,r.prototype.name="InvalidCharacterError";var o="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,i=0,a=0,l="";o=e.charAt(a++);~o&&(n=i%4?64*n+o:o,i++%4)?l+=String.fromCharCode(255&n>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return l};function i(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(o(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return o(e)}}function a(t){this.message=t}a.prototype=new Error,a.prototype.name="InvalidTokenError";const l=function(t,e){if("string"!=typeof t)throw new a("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(i(t.split(".")[n]))}catch(t){throw new a("Invalid token specified: "+t.message)}}},363:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function l(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,o){var i=this;this.getDetails=function(){return n(i,void 0,void 0,(function(){return r(this,(function(t){return[2]}))}))},this.canClaimBenefit=function(){return!1},this.claim=function(){},this.open=function(){}}},771:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n){this.getMyNFTs=function(){return[]},this.listNFTs=function(t){return[]},this.open=function(t){}}},138:function(t,e,n){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function l(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=l(n(363)),c=l(n(98)),u=l(n(119)),d=l(n(771)),f=function(t){var e=this;this.baseUrl="https://wallet.metasky.me",this.client_id="default",this.portalId="",this.iframeId="",this.eventHandlersMap=new Map,this.generateRandomnString=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*r));return e},this.generatePortalId=function(){return"skywallet-".concat(e.generateRandomnString(10))},this.injectPortal=function(){if(!document.getElementById(e.portalId)){var t=document.createElement("style");t.innerHTML="\n            #".concat(e.portalId," .close-container {\n                min-width: 315px;\n                max-width: 428px;\n                width: 100%;\n                position: fixed;\n                left: 50%;\n                right: 50%;\n                transform: translateX(-50%);\n                -webkit-box-align: center;\n                align-items: center;\n                -webkit-box-pack: end;\n                justify-content: flex-end;\n                background-color: rgb(204, 213, 236);\n                z-index: 100;\n                height: 40px;\n                font-size: 14px;\n                font-weight: 700;\n                color: rgb(46, 54, 72);\n                cursor: pointer;\n                display: flex !important;\n            }\n            #").concat(e.portalId," .close-icon {\n                width: 20px;\n                height: 20px;\n                padding: 0px;\n                margin: 10px;\n                pointer-events: all;\n                color: black;\n                font-size: 12px;\n                font-weight: 600;\n                z-index: 9;\n                background-color: rgb(253, 215, 63);\n                border: 0px;\n                cursor: pointer;\n                border-radius: 100% !important;\n            }\n            #").concat(e.portalId," .iframe {\n                height: 926px;\n                max-width: 428px;\n                min-width: 375px;\n                width: 100%;\n                position: fixed;\n                left: 50%;\n                right: 50%;\n                -webkit-transform: translateX(-50%);\n                -moz-transform: translateX(-50%);\n                -ms-transform: translateX(-50%);\n                transform: translateX(-50%);\n                z-index: 99;\n                background-color: #e6eaf0;\n                padding-top: 2.5rem;\n                max-height: 90vh;        \n            }\n            @media (max-width: 429px) {\n                #").concat(e.portalId," .iframe {\n                    height: 100%;\n                    max-height: 100vh;  \n                }\n            }\n            #").concat(e.portalId," .overlay {\n                position: fixed;\n                display: block;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 90;\n                cursor: pointer;\n                -webkit-backdrop-filter: blur(20px);\n                backdrop-filter: blur(20px);\n            }\n            #").concat(e.portalId," {\n                display: none;\n                position: fixed;\n                left: 0;\n                right: 0;\n                top: 0;\n                bottom: 0;\n                z-index: 88;        \n            }\n        "),document.head.appendChild(t);var n=document.createElement("div");n.setAttribute("id",e.portalId);var r=document.createElement("iframe");r.setAttribute("src",""),r.setAttribute("frameborder","0"),r.setAttribute("allowFullScreen","true"),r.setAttribute("allow",Object.keys(e.walletPermissions).filter((function(t){return e.walletPermissions[t]})).join(";")),r.setAttribute("class","iframe"),r.setAttribute("id",e.iframeId);var o=document.createElement("div");o.setAttribute("class","overlay");var i=document.createElement("div");i.setAttribute("class","close-container"),i.onclick=e.close;var a=document.createElement("span");a.innerHTML="Close";var l=document.createElement("button");l.innerHTML="X",l.setAttribute("class","close-icon"),i.appendChild(a),i.appendChild(l),n.appendChild(i),n.appendChild(r),n.appendChild(o),document.body.appendChild(n)}},this.handleEvent=function(t){var n=e.eventHandlersMap.get(t.event)||[];n.forEach((function(e){e.handler(t.payload)})),e.eventHandlersMap.set(t.event,n.filter((function(t){var e;return!(null===(e=t.options)||void 0===e?void 0:e.once)})))},this.openWallet=function(t){var n,r;null===(n=document.getElementById(e.iframeId))||void 0===n||n.setAttribute("src","".concat(e.baseUrl,"/").concat(t)),null===(r=document.getElementById(e.portalId))||void 0===r||r.setAttribute("style","display: block;")},this.close=function(){var t,n;null===(t=document.getElementById(e.iframeId))||void 0===t||t.setAttribute("src",""),null===(n=document.getElementById(e.portalId))||void 0===n||n.setAttribute("style",""),e.handleEvent({event:"BEFORE_CLOSE",payload:{}})},this.login=function(t){return o(e,void 0,void 0,(function(){var e,n,r=this;return i(this,(function(o){return((null==t?void 0:t.forced)||!this.session.isLoggedIn)&&(this.openWallet("/login"),e=function(t){r.close()},n=function(){r.off("LOGIN",e)},this.on("LOGIN",e,{once:!0}),this.on("BEFORE_CLOSE",n,{once:!0})),[2]}))}))},this.logout=function(t){return o(e,void 0,void 0,(function(){return i(this,(function(e){return(null==t?void 0:t.clearUserSessionOnly)?(this.session.onLogout(),[2]):(this.openWallet("/logout"),[2])}))}))},this.benefit=function(t){return new s.default(t,e.session,e.baseUrl)},this.nft=function(t){return new u.default(t,e.session,e.baseUrl)},this.listCollections=function(t){return[]},this.collection=function(t){return new d.default("",e.session,e.baseUrl)},this.openMyNfts=function(){},this.whitelist=function(t){},this.on=function(t,n,r){var o=e.eventHandlersMap.get(t)||[];e.eventHandlersMap.set(t,a(a([],o,!0),[{handler:n,options:r}],!1))},this.off=function(t,n){var r=e.eventHandlersMap.get(t)||[];e.eventHandlersMap.set(t,r.filter((function(t){return t.handler!==n})))},this.client_id=(null==t?void 0:t.client_id)||"default",this.walletPermissions=r({camera:!0,"clipboard-read":!0,"clipboard-write":!0,microphone:!0},(null==t?void 0:t.permission)||{}),this.portalId=this.generatePortalId(),this.iframeId="".concat(this.portalId,"-iframe"),this.session=new c.default(this.iframeId),"undefined"!=typeof window&&(this.on("LOGIN",(function(t){return e.session.onLogin(t.payload.bearerToken)})),this.on("LOGOUT",(function(){return e.session.onLogout()})),window.addEventListener("message",(function(t){try{var n=JSON.parse(t.data);e.handleEvent(n)}catch(t){}})),this.injectPortal())};if("undefined"!=typeof window){var h=function(){window.Wallet=f};"complete"===document.readyState?h():window.attachEvent?window.attachEvent("onload",h):window.addEventListener("load",h,!1)}e.default=f},119:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n){this.getDetails=function(){},this.buy=function(){},this.sell=function(){},this.putForSale=function(){},this.removeFromSale=function(){},this.open=function(){}}},98:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(245)),i=function(){function t(t){var e=this;this._frameId="",this.bearerTokenKey="BearerToken",this.onLogin=function(t){localStorage.setItem(e.bearerTokenKey,t)},this.onLogout=function(){localStorage.removeItem(e.bearerTokenKey)},this._frameId=t}return Object.defineProperty(t.prototype,"frameId",{get:function(){return this._frameId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoggedIn",{get:function(){var t=localStorage.getItem(this.bearerTokenKey);if(!t)return!1;var e=(0,o.default)(t),n=Date.now()/1e3;return(e&&(null==e?void 0:e.exp))>n},enumerable:!1,configurable:!0}),t}();e.default=i}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(138)})();