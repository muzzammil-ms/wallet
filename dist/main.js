(()=>{"use strict";var e={245:(e,t,n)=>{function o(e){this.message=e}n.r(t),n.d(t,{InvalidTokenError:()=>a,default:()=>l}),o.prototype=new Error,o.prototype.name="InvalidCharacterError";var r="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,a=0,l="";r=t.charAt(a++);~r&&(n=i%4?64*n+r:r,i++%4)?l+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return l};function i(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return r(t)}}function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidTokenError";const l=function(e,t){if("string"!=typeof e)throw new a("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(i(e.split(".")[n]))}catch(e){throw new a("Invalid token specified: "+e.message)}}},613:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r){var i=this;this.getDetails=function(){return n(i,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},this.canClaimBenefit=function(){return!1},this.claim=function(){},this.open=function(){i.ui.openWallet("/benefit-details/".concat(i.id,"?client_id=").concat(i.session.clubId))},this.session=t,this.ui=r,this.id=e}},339:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){var o=this;this.getMyNFTs=function(){return[]},this.listNFTs=function(e){return[]},this.open=function(e,t){var n='/collection-details?filters={"collectionIds":["'.concat(o.id,'"]}&client_id=').concat(o.session.clubId);"NFT_LIST"===(null==t?void 0:t.uiState)&&(n='/marketplace/listings?filters={"collectionIds":["'.concat(o.id,'"]}&client_id=').concat(o.session.clubId)),o.ui.openWallet(n)},this.session=t,this.ui=n,this.id=e}},770:function(e,t,n){var o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(613)),a=r(n(125)),l=r(n(339)),s=r(n(944)),c=function(e){var t=this;this.eventHandlersMap={},this.handleEvent=function(e){var n=t.eventHandlersMap[e.event]||[];n.forEach((function(t){t.handler(e)})),t.eventHandlersMap[e.event]=n.filter((function(e){var t;return!(null===(t=e.options)||void 0===t?void 0:t.once)}))},this.login=function(e){var n;if((null===(n=null==e?void 0:e.payload)||void 0===n?void 0:n.forced)||!t.session.isLoggedIn){var o=function(){t.off("LOGIN_SUCCESS",o),t.off("BEFORE_CLOSE",o),t.close()};t.on("LOGIN_SUCCESS",o,{once:!0}),t.on("BEFORE_CLOSE",o,{once:!0}),t.open("/login?client_id=".concat(t.session.clubId))}},this.logout=function(e){var n;if(null===(n=null==e?void 0:e.payload)||void 0===n?void 0:n.clearUserSessionOnly)t.session.onLogout();else{var o=function(){t.off("CANCEL_LOGOUT",o),t.off("LOGOUT_SUCESS",o),t.off("BEFORE_CLOSE",o),t.close()};t.on("CANCEL_LOGOUT",o,{once:!0}),t.on("LOGOUT_SUCESS",o,{once:!0}),t.on("BEFORE_CLOSE",o,{once:!0}),t.open("/profile?client_id=".concat(t.session.clubId,"&showLogoutSheet=true"))}},this.open=function(e){t.ui.openWallet(e)},this.do=function(e){if(e&&"string"!=typeof e)switch(null==e?void 0:e.action){case"LOGIN":t.login(e);break;case"LOGOUT":t.logout(e);break;case"OPEN_BENEFIT":new i.default(e.payload.benefitId,t.session,t.ui).open();break;case"OPEN_COLLECTION":new l.default(e.payload.collectionId,t.session,t.ui).open(void 0,{uiState:"NFT_LIST"});break;case"OPEN_COLLECTION_DETAILS":new l.default(e.payload.collectionId,t.session,t.ui).open(void 0,{uiState:"DETAIL"});break;case"OPEN_MY_NFTS":t.ui.openWallet("/nfts-list/own?client_id=".concat(t.session.clubId));break;default:t.ui.openWallet()}else t.ui.openWallet(e)},this.close=function(){t.ui.close()},this.on=function(e,n,r){var i=t.eventHandlersMap[e]||[];t.eventHandlersMap[e]=o(o([],i,!0),[{handler:n,options:r}],!1)},this.off=function(e,n){var o=t.eventHandlersMap[e]||[];t.eventHandlersMap[e]=o.filter((function(e){return e.handler!==n}))},this.session=new a.default,this.ui=new s.default((function(){t.handleEvent({event:"BEFORE_CLOSE",payload:{}})}),(function(){t.handleEvent({event:"OPEN",payload:{}})})),"undefined"!=typeof window&&(this.session.clubId=(null==e?void 0:e.clubId)||"",this.on("LOGIN_SUCCESS",(function(e){t.session.onLogin(e.payload.bearerToken,e.payload.walletAddress)})),this.on("LOGOUT_SUCESS",(function(){return t.session.onLogout()})),window.addEventListener("message",(function(e){try{if(e.origin!==t.ui.baseUrl)return;console.log("Received",e.data);var n=JSON.parse(e.data);if(!n.event)return;t.handleEvent(n)}catch(e){}})))};function d(e){return new c(e)}if(t.default=d,"undefined"!=typeof window){var u=function(){window.Metasky=d};"complete"===document.readyState?u():window.attachEvent?window.attachEvent("onload",u):window.addEventListener("load",u,!1)}},125:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(245)),i=function(){function e(){this.onLogin=function(t,n){var o,r;void 0===n&&(n={}),null===(o=e.getStorage())||void 0===o||o.setItem(e.bearerTokenKey,t),null===(r=e.getStorage())||void 0===r||r.setItem(e.addressKey,JSON.stringify(n))},this.onLogout=function(){var t,n,o;null===(t=e.getStorage())||void 0===t||t.removeItem(e.bearerTokenKey),null===(n=e.getStorage())||void 0===n||n.removeItem(e.addressKey),null===(o=e.getStorage())||void 0===o||o.removeItem(e.clubIdKey)}}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){var t,n=null===(t=e.getStorage())||void 0===t?void 0:t.getItem(e.bearerTokenKey);if(!n)return!1;var o=(0,r.default)(n),i=Date.now()/1e3;return(o&&(null==o?void 0:o.exp))>i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clubId",{get:function(){var t;return(null===(t=e.getStorage())||void 0===t?void 0:t.getItem(e.clubIdKey))||"default"},set:function(t){var n;null===(n=e.getStorage())||void 0===n||n.setItem(e.clubIdKey,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bearerToken",{get:function(){var t;return null===(t=e.getStorage())||void 0===t?void 0:t.getItem(e.bearerTokenKey)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chainAddress",{get:function(){var t,n=null===(t=e.getStorage())||void 0===t?void 0:t.getItem(e.addressKey);return n?JSON.parse(n):{}},enumerable:!1,configurable:!0}),e.bearerTokenKey="ms-bearer-token",e.clubIdKey="ms-club-id",e.addressKey="ms-chain-address",e.getStorage=function(){if("undefined"!=typeof window)return localStorage},e}();t.default=i},944:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t,n){var o=this;this.baseUrl="https://wallet.metasky.me",this.portalId="",this.iframeId="",this.injectPortal=function(){if(!document.getElementById(o.portalId)){var e=document.createElement("style");e.innerHTML="\n            #".concat(o.portalId," .close-container {\n                min-width: 315px;\n                max-width: 428px;\n                width: 100%;\n                position: fixed;\n                left: 50%;\n                right: 50%;\n                transform: translateX(-50%);\n                -webkit-box-align: center;\n                align-items: center;\n                -webkit-box-pack: end;\n                justify-content: flex-end;\n                background-color: rgb(204, 213, 236);\n                z-index: 100;\n                height: 40px;\n                font-size: 14px;\n                font-weight: 700;\n                color: rgb(46, 54, 72);\n                cursor: pointer;\n                display: flex !important;\n            }\n            #").concat(o.portalId," .close-icon {\n                width: 20px;\n                height: 20px;\n                padding: 0px;\n                margin: 10px;\n                pointer-events: all;\n                color: black;\n                font-size: 12px;\n                font-weight: 600;\n                z-index: 9;\n                background-color: rgb(253, 215, 63);\n                border: 0px;\n                cursor: pointer;\n                border-radius: 100% !important;\n            }\n            #").concat(o.portalId," .iframe {\n                height: 926px;\n                max-width: 428px;\n                min-width: 375px;\n                width: 100%;\n                position: fixed;\n                left: 50%;\n                right: 50%;\n                -webkit-transform: translateX(-50%);\n                -moz-transform: translateX(-50%);\n                -ms-transform: translateX(-50%);\n                transform: translateX(-50%);\n                z-index: 99;\n                background-color: #e6eaf0;\n                padding-top: 2.5rem;\n                max-height: 90vh;        \n            }\n            @media (max-width: 429px) {\n                #").concat(o.portalId," .iframe {\n                    height: 100%;\n                    max-height: 100vh;  \n                }\n            }\n            #").concat(o.portalId," .overlay {\n                position: fixed;\n                display: block;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 90;\n                cursor: pointer;\n                -webkit-backdrop-filter: blur(20px);\n                backdrop-filter: blur(20px);\n            }\n            #").concat(o.portalId," {\n                display: none;\n                position: fixed;\n                left: 0;\n                right: 0;\n                top: 0;\n                bottom: 0;\n                z-index: 88;        \n            }\n        "),document.head.appendChild(e);var t=document.createElement("div");t.setAttribute("id",o.portalId);var n=document.createElement("iframe");n.setAttribute("src",""),n.setAttribute("frameborder","0"),n.setAttribute("allowFullScreen","true"),n.setAttribute("allow",Object.keys(o.walletPermissions).filter((function(e){return o.walletPermissions[e]})).join(";")),n.setAttribute("class","iframe"),n.setAttribute("id",o.iframeId);var r=document.createElement("div");r.setAttribute("class","overlay");var i=document.createElement("div");i.setAttribute("class","close-container"),i.onclick=o.close;var a=document.createElement("span");a.innerHTML="Close";var l=document.createElement("button");l.innerHTML="X",l.setAttribute("class","close-icon"),i.appendChild(a),i.appendChild(l),t.appendChild(i),t.appendChild(n),t.appendChild(r),document.body.appendChild(t)}},this.openWallet=function(e){var t,n;void 0===e&&(e=""),null===(t=document.getElementById(o.iframeId))||void 0===t||t.setAttribute("src","".concat(o.baseUrl).concat(e)),null===(n=document.getElementById(o.portalId))||void 0===n||n.setAttribute("style","display: block;"),o.onOpen()},this.close=function(){var e;null===(e=document.getElementById(o.portalId))||void 0===e||e.setAttribute("style",""),o.onClose()},this.onClose=t,this.onOpen=n,this.walletPermissions={camera:!0,"clipboard-read":!0,"clipboard-write":!0,microphone:!0},this.portalId=e.generatePortalId(),this.iframeId="".concat(this.portalId,"-iframe"),"undefined"!=typeof window&&this.injectPortal()}return e.generateRandomnString=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*o));return t},e.generatePortalId=function(){return"skywallet-".concat(e.generateRandomnString(10))},e}();t.default=n}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(770)})();