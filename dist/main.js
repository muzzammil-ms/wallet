(()=>{"use strict";var t={245:(t,e,n)=>{function o(t){this.message=t}n.r(e),n.d(e,{InvalidTokenError:()=>a,default:()=>l}),o.prototype=new Error,o.prototype.name="InvalidCharacterError";var r="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,a=0,l="";r=e.charAt(a++);~r&&(n=i%4?64*n+r:r,i++%4)?l+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return l};function i(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(r(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return r(e)}}function a(t){this.message=t}a.prototype=new Error,a.prototype.name="InvalidTokenError";const l=function(t,e){if("string"!=typeof t)throw new a("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(i(t.split(".")[n]))}catch(t){throw new a("Invalid token specified: "+t.message)}}},363:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function l(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,r){var i=this;this.getDetails=function(){return n(i,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},this.canClaimBenefit=function(){return!1},this.claim=function(){},this.open=function(){i.ui.openWallet("/benefit-details/".concat(i.id))},this.session=e,this.ui=r,this.id=t}},771:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n){var o=this;this.getMyNFTs=function(){return[]},this.listNFTs=function(t){return[]},this.open=function(t,e){o.ui.openWallet("/benefit-details/".concat(o.id))},this.session=e,this.ui=n,this.id=t}},138:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function l(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=a(n(363)),s=a(n(98)),c=a(n(119)),u=a(n(771)),d=a(n(281)),f=function(t){var e=this;this.client_id="default",this.eventHandlersMap=new Map,this.handleEvent=function(t){var n=e.eventHandlersMap.get(t.event)||[];n.forEach((function(e){e.handler(t.payload)})),e.eventHandlersMap.set(t.event,n.filter((function(t){var e;return!(null===(e=t.options)||void 0===e?void 0:e.once)})))},this.openWallet=function(t){e.ui.openWallet(t)},this.close=function(){e.ui.close()},this.login=function(t){return o(e,void 0,void 0,(function(){var e,n,o=this;return r(this,(function(r){return((null==t?void 0:t.forced)||!this.session.isLoggedIn)&&(this.openWallet("/login"),e=function(t){o.close()},n=function(){o.off("LOGIN",e)},this.on("LOGIN",e,{once:!0}),this.on("BEFORE_CLOSE",n,{once:!0})),[2]}))}))},this.logout=function(t){return o(e,void 0,void 0,(function(){return r(this,(function(e){return(null==t?void 0:t.clearUserSessionOnly)?(this.session.onLogout(),[2]):(this.openWallet("/logout"),[2])}))}))},this.benefit=function(t){return new l.default(t,e.session,e.ui)},this.nft=function(t){return new c.default(t,e.session,e.ui)},this.listCollections=function(t){return[]},this.collection=function(t){return new u.default(t,e.session,e.ui)},this.openMyNfts=function(){e.openWallet("/nfts-list/own")},this.whitelist=function(t){e.openWallet("/login?whitelist=true")},this.on=function(t,n,o){var r=e.eventHandlersMap.get(t)||[];e.eventHandlersMap.set(t,i(i([],r,!0),[{handler:n,options:o}],!1))},this.off=function(t,n){var o=e.eventHandlersMap.get(t)||[];e.eventHandlersMap.set(t,o.filter((function(t){return t.handler!==n})))},this.client_id=(null==t?void 0:t.client_id)||"default",this.session=new s.default,this.ui=new d.default((function(){e.handleEvent({event:"BEFORE_CLOSE",payload:{}})}),t),"undefined"!=typeof window&&(this.on("LOGIN",(function(t){return e.session.onLogin(t.payload.bearerToken)})),this.on("LOGOUT",(function(){return e.session.onLogout()})),window.addEventListener("message",(function(t){try{var n=JSON.parse(t.data);e.handleEvent(n)}catch(t){}})))};if("undefined"!=typeof window){var h=function(){window.Wallet=f};"complete"===document.readyState?h():window.attachEvent?window.attachEvent("onload",h):window.addEventListener("load",h,!1)}e.default=f},119:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n){var o=this;this.getDetails=function(){},this.open=function(t){o.ui.openWallet("/")},this.session=e,this.ui=n,this.id=t}},98:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(245)),i=function(){function t(){var t=this;this.bearerTokenKey="BearerToken",this.onLogin=function(e){localStorage.setItem(t.bearerTokenKey,e)},this.onLogout=function(){localStorage.removeItem(t.bearerTokenKey)}}return Object.defineProperty(t.prototype,"isLoggedIn",{get:function(){var t=localStorage.getItem(this.bearerTokenKey);if(!t)return!1;var e=(0,r.default)(t),n=Date.now()/1e3;return(e&&(null==e?void 0:e.exp))>n},enumerable:!1,configurable:!0}),t}();e.default=i},281:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){var o=this;this.baseUrl="https://wallet.metasky.me",this.portalId="",this.iframeId="",this.generateRandomnString=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*o));return e},this.generatePortalId=function(){return"skywallet-".concat(o.generateRandomnString(10))},this.injectPortal=function(){if(!document.getElementById(o.portalId)){var t=document.createElement("style");t.innerHTML="\n            #".concat(o.portalId," .close-container {\n                min-width: 315px;\n                max-width: 428px;\n                width: 100%;\n                position: fixed;\n                left: 50%;\n                right: 50%;\n                transform: translateX(-50%);\n                -webkit-box-align: center;\n                align-items: center;\n                -webkit-box-pack: end;\n                justify-content: flex-end;\n                background-color: rgb(204, 213, 236);\n                z-index: 100;\n                height: 40px;\n                font-size: 14px;\n                font-weight: 700;\n                color: rgb(46, 54, 72);\n                cursor: pointer;\n                display: flex !important;\n            }\n            #").concat(o.portalId," .close-icon {\n                width: 20px;\n                height: 20px;\n                padding: 0px;\n                margin: 10px;\n                pointer-events: all;\n                color: black;\n                font-size: 12px;\n                font-weight: 600;\n                z-index: 9;\n                background-color: rgb(253, 215, 63);\n                border: 0px;\n                cursor: pointer;\n                border-radius: 100% !important;\n            }\n            #").concat(o.portalId," .iframe {\n                height: 926px;\n                max-width: 428px;\n                min-width: 375px;\n                width: 100%;\n                position: fixed;\n                left: 50%;\n                right: 50%;\n                -webkit-transform: translateX(-50%);\n                -moz-transform: translateX(-50%);\n                -ms-transform: translateX(-50%);\n                transform: translateX(-50%);\n                z-index: 99;\n                background-color: #e6eaf0;\n                padding-top: 2.5rem;\n                max-height: 90vh;        \n            }\n            @media (max-width: 429px) {\n                #").concat(o.portalId," .iframe {\n                    height: 100%;\n                    max-height: 100vh;  \n                }\n            }\n            #").concat(o.portalId," .overlay {\n                position: fixed;\n                display: block;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 90;\n                cursor: pointer;\n                -webkit-backdrop-filter: blur(20px);\n                backdrop-filter: blur(20px);\n            }\n            #").concat(o.portalId," {\n                display: none;\n                position: fixed;\n                left: 0;\n                right: 0;\n                top: 0;\n                bottom: 0;\n                z-index: 88;        \n            }\n        "),document.head.appendChild(t);var e=document.createElement("div");e.setAttribute("id",o.portalId);var n=document.createElement("iframe");n.setAttribute("src",""),n.setAttribute("frameborder","0"),n.setAttribute("allowFullScreen","true"),n.setAttribute("allow",Object.keys(o.walletPermissions).filter((function(t){return o.walletPermissions[t]})).join(";")),n.setAttribute("class","iframe"),n.setAttribute("id",o.iframeId);var r=document.createElement("div");r.setAttribute("class","overlay");var i=document.createElement("div");i.setAttribute("class","close-container"),i.onclick=o.close;var a=document.createElement("span");a.innerHTML="Close";var l=document.createElement("button");l.innerHTML="X",l.setAttribute("class","close-icon"),i.appendChild(a),i.appendChild(l),e.appendChild(i),e.appendChild(n),e.appendChild(r),document.body.appendChild(e)}},this.openWallet=function(t){var e,n;null===(e=document.getElementById(o.iframeId))||void 0===e||e.setAttribute("src","".concat(o.baseUrl,"/").concat(t)),null===(n=document.getElementById(o.portalId))||void 0===n||n.setAttribute("style","display: block;")},this.close=function(){var t,e;null===(t=document.getElementById(o.iframeId))||void 0===t||t.setAttribute("src",""),null===(e=document.getElementById(o.portalId))||void 0===e||e.setAttribute("style",""),o.onClose()},this.onClose=t,this.walletPermissions=n({camera:!0,"clipboard-read":!0,"clipboard-write":!0,microphone:!0},(null==e?void 0:e.permission)||{}),this.portalId=this.generatePortalId(),this.iframeId="".concat(this.portalId,"-iframe"),"undefined"!=typeof window&&this.injectPortal()}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(138)})();